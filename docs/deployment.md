The application is deployed on Kubernetes via a `Deployment` manifest located under the `k8s/Deployment.yaml`.

The application is deployed as a pod with one `nginx` container working as a web server serving the static contentnts generated by mkdocs.

The static content is loaded from a `persistentVolumeClaim` with name `html-mkdocs`.

The pipeline is designed to build the image or build the documentation depending on the value of the `action` param.

To deploy the demo:

0) create the namespace

```
$ oc new-project pipelines-demo
```

1) fork the repo
2) clone the repo
3) create the PVC

```
$ oc create -f cd/pvc.yaml
```

4) apply the Pipelines resurces

```
$ oc create -f cd/tasks/
$ oc create -f cd/pipeline/pipeline.yaml
```

5) apply the trigger resources

```
$ oc create -f cd/triggers/triggerbinding.yaml
$ oc create -f cd/triggers/triggertemplate.yaml
$ oc create -f cd/triggers/triggertemplate.yaml
$ oc create -f cd/triggers/eventlistner.yaml
```

6) confirm that an eventlistner service has been created and expose it

```
$ oc get svc
$ oc expose svc el-mkdocs
```

7) get the URL route

```
$ echo "URL: $(oc  get route el-mkdocs --template='http://{{.spec.host}}')"
```

8) start building the image:

```
$ cd tests
$ ./run.sh build-image
```

9) check if the pipeline is started

```
$ tkn pipelinerun list
$ tkn pipeline logs -f <pipelinerun-name>
```

